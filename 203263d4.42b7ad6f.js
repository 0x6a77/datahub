(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{158:function(e,t,a){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}a.d(t,"a",(function(){return n}))},159:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}a.d(t,"a",(function(){return n}))},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),b=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=b(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=b(a),d=n,m=p["".concat(s,".").concat(d)]||p[d]||u[d]||r;return a?i.a.createElement(m,l(l({ref:t},c),{},{components:a})):i.a.createElement(m,l({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,s=new Array(r);s[0]=d;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:n,s[1]=l;for(var c=2;c<r;c++)s[c]=a[c];return i.a.createElement.apply(null,s)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"},223:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/datahub-metadata-ingestion-framework-17ea65cd4913f08cb69942bf3a41eb1d.png"},82:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return b}));var n=a(158),i=a(159),r=(a(0),a(160)),s={title:"Metadata Ingestion",hide_title:!0,slug:"/metadata-ingestion",custom_edit_url:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/README.md"},l={unversionedId:"metadata-ingestion/README",id:"metadata-ingestion/README",isDocsHomePage:!1,title:"Metadata Ingestion",description:"Metadata Ingestion",source:"@site/genDocs/metadata-ingestion/README.md",slug:"/metadata-ingestion",permalink:"/docs/metadata-ingestion",editUrl:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/README.md",version:"current",sidebar:"overviewSidebar",previous:{title:"MetadataChangeEvent (MCE) Consumer Job",permalink:"/docs/metadata-jobs/mce-consumer-job"},next:{title:"Aspect Versioning",permalink:"/docs/advanced/aspect-versioning"}},o=[{value:"Architecture",id:"architecture",children:[]},{value:"Pre-Requisites",id:"pre-requisites",children:[]},{value:"Building from source:",id:"building-from-source",children:[]},{value:"Usage",id:"usage",children:[]},{value:"Recipes",id:"recipes",children:[]},{value:"Sources",id:"sources",children:[{value:"Kafka Metadata <code>kafka</code>",id:"kafka-metadata-kafka",children:[]},{value:"MySQL Metadata <code>mysql</code>",id:"mysql-metadata-mysql",children:[]},{value:"Microsoft SQL Server Metadata <code>mssql</code>",id:"microsoft-sql-server-metadata-mssql",children:[]},{value:"Hive <code>hive</code>",id:"hive-hive",children:[]},{value:"PostgreSQL <code>postgres</code>",id:"postgresql-postgres",children:[]},{value:"Snowflake <code>snowflake</code>",id:"snowflake-snowflake",children:[]},{value:"Google BigQuery <code>bigquery</code>",id:"google-bigquery-bigquery",children:[]},{value:"LDAP <code>ldap</code>",id:"ldap-ldap",children:[]},{value:"File <code>file</code>",id:"file-file",children:[]}]},{value:"Sinks",id:"sinks",children:[{value:"DataHub Rest <code>datahub-rest</code>",id:"datahub-rest-datahub-rest",children:[]},{value:"DataHub Kafka <code>datahub-kafka</code>",id:"datahub-kafka-datahub-kafka",children:[]},{value:"Console <code>console</code>",id:"console-console",children:[]},{value:"File <code>file</code>",id:"file-file-1",children:[]}]},{value:"Migrating from the old scripts",id:"migrating-from-the-old-scripts",children:[]},{value:"Contributing",id:"contributing",children:[{value:"Code layout",id:"code-layout",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Sanity check code before committing",id:"sanity-check-code-before-committing",children:[]}]}],c={rightToc:o};function b(e){var t=e.components,s=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},c,s,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"metadata-ingestion"},"Metadata Ingestion"),Object(r.b)("p",null,"This module hosts an extensible Python-based metadata ingestion system for DataHub.\nThis supports sending data to DataHub using Kafka or through the REST api.\nIt can be used through our CLI tool or as a library e.g. with an orchestrator like Airflow."),Object(r.b)("h3",{id:"architecture"},"Architecture"),Object(r.b)("p",null,Object(r.b)("img",{alt:"metadata ingestion framework layout",src:a(223).default})),Object(r.b)("p",null,"The architecture of this metadata ingestion framework is heavily inspired by ",Object(r.b)("a",{parentName:"p",href:"https://gobblin.apache.org/"},"Apache Gobblin")," (also originally a LinkedIn project!). We have a standardized format - the MetadataChangeEvent - and sources and sinks which respectively produce and consume these objects. The sources pull metadata from a variety of data systems, while the sinks are primarily for moving this metadata into DataHub."),Object(r.b)("h3",{id:"pre-requisites"},"Pre-Requisites"),Object(r.b)("p",null,"Before running any metadata ingestion job, you should make sure that DataHub backend services are all running. If you are trying this out locally, the easiest way to do that is through ",Object(r.b)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/docker"},"quickstart Docker images"),"."),Object(r.b)("h3",{id:"building-from-source"},"Building from source:"),Object(r.b)("h4",{id:"pre-requisites-1"},"Pre-Requisites"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Python 3.6+ must be installed in your host environment."),Object(r.b)("li",{parentName:"ol"},"You also need to build the ",Object(r.b)("inlineCode",{parentName:"li"},"mxe-schemas")," module as below.",Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",{parentName:"pre"},"(cd .. && ./gradlew :metadata-events:mxe-schemas:build)\n")),"This is needed to generate ",Object(r.b)("inlineCode",{parentName:"li"},"MetadataChangeEvent.avsc")," which is the schema for the ",Object(r.b)("inlineCode",{parentName:"li"},"MetadataChangeEvent_v4")," Kafka topic."),Object(r.b)("li",{parentName:"ol"},"On MacOS: ",Object(r.b)("inlineCode",{parentName:"li"},"brew install librdkafka")),Object(r.b)("li",{parentName:"ol"},"On Debian/Ubuntu: ",Object(r.b)("inlineCode",{parentName:"li"},"sudo apt install librdkafka-dev python3-dev python3-venv"))),Object(r.b)("h4",{id:"set-up-your-python-environment"},"Set up your Python environment"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"python3 -m venv venv\nsource venv/bin/activate\npip install --upgrade pip wheel setuptools\npip install -e .\n./scripts/codegen.sh\n")),Object(r.b)("p",null,"Common issues:"),Object(r.b)("details",null,Object(r.b)("summary",null,'Wheel issues e.g. "Failed building wheel for avro-python3" or "error: invalid command \'bdist_wheel\'"'),Object(r.b)("p",null,"  This means Python's ",Object(r.b)("inlineCode",{parentName:"p"},"wheel")," is not installed. Try running the following commands and then retry."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"pip install --upgrade pip wheel setuptools\npip cache purge\n"))),Object(r.b)("details",null,Object(r.b)("summary",null,"Failure to install confluent_kafka: \"error: command 'x86_64-linux-gnu-gcc' failed with exit status 1\""),Object(r.b)("p",null,"  This sometimes happens if there's a version mismatch between the Kafka's C library and the Python wrapper library. Try running ",Object(r.b)("inlineCode",{parentName:"p"},"pip install confluent_kafka==1.5.0")," and then retrying.")),Object(r.b)("details",null,Object(r.b)("summary",null,'Failure to install avro-python3: "distutils.errors.DistutilsOptionError: Version loaded from file: avro/VERSION.txt does not comply with PEP 440"'),Object(r.b)("p",null,"  The underlying ",Object(r.b)("inlineCode",{parentName:"p"},"avro-python3"),' package is buggy. In particular, it often only installs correctly when installed from a pre-built "wheel" but not when from source. Try running the following commands and then retry.'),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"pip uninstall avro-python3  # sanity check, ok if this fails\npip install --upgrade pip wheel setuptools\npip cache purge\npip install avro-python3\n"))),Object(r.b)("h3",{id:"usage"},"Usage"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"datahub ingest -c ./examples/recipes/example_to_datahub_rest.yml\n")),Object(r.b)("p",null,"We have also included a couple ",Object(r.b)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/examples/airflow"},"sample DAGs")," that can be used with ",Object(r.b)("a",{parentName:"p",href:"https://airflow.apache.org/"},"Airflow"),"."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"generic_recipe_sample_dag.py")," - a simple Airflow DAG that picks up a DataHub ingestion recipe configuration and runs it."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"mysql_sample_dag.py")," - an Airflow DAG that runs a MySQL metadata ingestion pipeline using an inlined configuration.")),Object(r.b)("h2",{id:"recipes"},"Recipes"),Object(r.b)("p",null,"A recipe is a configuration file that tells our ingestion scripts where to pull data from (source) and where to put it (sink).\nHere's a simple example that pulls metadata from MSSQL and puts it into datahub."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yaml"},"# A sample recipe that pulls metadata from MSSQL and puts it into DataHub\n# using the Rest API.\nsource:\n  type: mssql\n  config:\n    username: sa\n    password: test!Password\n    database: DemoData\n\nsink:\n  type: \"datahub-rest\"\n  config:\n    server: 'http://localhost:8080'\n")),Object(r.b)("p",null,"Running a recipe is quite easy."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"datahub ingest -c ./examples/recipes/mssql_to_datahub.yml\n")),Object(r.b)("p",null,"A number of recipes are included in the examples/recipes directory."),Object(r.b)("h2",{id:"sources"},"Sources"),Object(r.b)("h3",{id:"kafka-metadata-kafka"},"Kafka Metadata ",Object(r.b)("inlineCode",{parentName:"h3"},"kafka")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of topics - from the Kafka broker"),Object(r.b)("li",{parentName:"ul"},"Schemas associated with each topic - from the schema registry")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'source:\n  type: "kafka"\n  config:\n    connection:\n      bootstrap: "broker:9092"\n      schema_registry_url: http://localhost:8081\n      consumer_config: {}  # passed to https://docs.confluent.io/platform/current/clients/confluent-kafka-python/index.html#deserializingconsumer\n')),Object(r.b)("h3",{id:"mysql-metadata-mysql"},"MySQL Metadata ",Object(r.b)("inlineCode",{parentName:"h3"},"mysql")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases and tables"),Object(r.b)("li",{parentName:"ul"},"Column types and schema associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install pymysql")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'source:\n  type: mysql\n  config:\n    username: root\n    password: example\n    database: dbname\n    host_port: localhost:3306\n    table_pattern:\n      allow:\n      - "schema1.table2"\n      deny:\n      - "performance_schema"\n')),Object(r.b)("h3",{id:"microsoft-sql-server-metadata-mssql"},"Microsoft SQL Server Metadata ",Object(r.b)("inlineCode",{parentName:"h3"},"mssql")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases, schema, and tables"),Object(r.b)("li",{parentName:"ul"},"Column types associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install sqlalchemy-pytds")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'source:\n  type: mssql\n  config:\n    username: user\n    password: pass\n    host_port: localhost:1433\n    database: DemoDatabase\n    table_pattern:\n      allow:\n      - "schema1.table1"\n      - "schema1.table2"\n      deny:\n      - "^.*\\\\.sys_.*" # deny all tables that start with sys_\n    options:\n      # Any options specified here will be passed to SQLAlchemy\'s create_engine as kwargs.\n      # See https://docs.sqlalchemy.org/en/14/core/engines.html for details.\n      charset: \'utf8\'\n')),Object(r.b)("h3",{id:"hive-hive"},"Hive ",Object(r.b)("inlineCode",{parentName:"h3"},"hive")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases, schema, and tables"),Object(r.b)("li",{parentName:"ul"},"Column types associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install pyhive[hive]")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"source:\n  type: hive\n  config:\n    username: user\n    password: pass\n    host_port: localhost:10000\n    database: DemoDatabase\n    # table_pattern is same as above\n    # options is same as above\n")),Object(r.b)("h3",{id:"postgresql-postgres"},"PostgreSQL ",Object(r.b)("inlineCode",{parentName:"h3"},"postgres")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases, schema, and tables"),Object(r.b)("li",{parentName:"ul"},"Column types associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install psycopg2-binary")," or ",Object(r.b)("inlineCode",{parentName:"p"},"pip install psycopg2")),Object(r.b)("p",null,"If you're using PostGIS extensions for Postgres, also use ",Object(r.b)("inlineCode",{parentName:"p"},"pip install GeoAlchemy2"),"."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"source:\n  type: postgres\n  config:\n    username: user\n    password: pass\n    host_port: localhost:5432\n    database: DemoDatabase\n    # table_pattern is same as above\n    # options is same as above\n")),Object(r.b)("h3",{id:"snowflake-snowflake"},"Snowflake ",Object(r.b)("inlineCode",{parentName:"h3"},"snowflake")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases, schema, and tables"),Object(r.b)("li",{parentName:"ul"},"Column types associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install snowflake-sqlalchemy")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"source:\n  type: snowflake\n  config:\n    username: user\n    password: pass\n    host_port: account_name\n    # table_pattern is same as above\n    # options is same as above\n")),Object(r.b)("h3",{id:"google-bigquery-bigquery"},"Google BigQuery ",Object(r.b)("inlineCode",{parentName:"h3"},"bigquery")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of databases, schema, and tables"),Object(r.b)("li",{parentName:"ul"},"Column types associated with each table")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install pybigquery")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'source:\n  type: bigquery\n  config:\n    project_id: project  # optional - can autodetect from environment\n    dataset: dataset_name\n    options: # options is same as above\n      # See https://github.com/mxmzdlv/pybigquery#authentication for details.\n      credentials_path: "/path/to/keyfile.json"  # optional\n    # table_pattern is same as above\n')),Object(r.b)("h3",{id:"ldap-ldap"},"LDAP ",Object(r.b)("inlineCode",{parentName:"h3"},"ldap")),Object(r.b)("p",null,"Extracts:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"List of people"),Object(r.b)("li",{parentName:"ul"},"Names, emails, titles, and manager information for each person")),Object(r.b)("p",null,"Extra requirements: ",Object(r.b)("inlineCode",{parentName:"p"},"pip install python-ldap>=2.4"),". See that ",Object(r.b)("a",{parentName:"p",href:"https://www.python-ldap.org/en/python-ldap-3.3.0/installing.html#pre-built-binaries"},"library's docs")," for extra build requirements."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'source:\n  type: "ldap"\n  config:\n    ldap_server: ldap://localhost\n    ldap_user: "cn=admin,dc=example,dc=org"\n    ldap_password: "admin"\n    base_dn: "dc=example,dc=org"\n    filter: "(objectClass=*)"  # optional field\n')),Object(r.b)("h3",{id:"file-file"},"File ",Object(r.b)("inlineCode",{parentName:"h3"},"file")),Object(r.b)("p",null,"Pulls metadata from a previously generated file. Note that the file sink\ncan produce such files, and a number of samples are included in the\n",Object(r.b)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/examples/mce_files"},"examples/mce_files")," directory."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"source:\n  type: file\n  filename: ./path/to/mce/file.json\n")),Object(r.b)("h2",{id:"sinks"},"Sinks"),Object(r.b)("h3",{id:"datahub-rest-datahub-rest"},"DataHub Rest ",Object(r.b)("inlineCode",{parentName:"h3"},"datahub-rest")),Object(r.b)("p",null,"Pushes metadata to DataHub using the GMA rest API. The advantage of the rest-based interface\nis that any errors can immediately be reported."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"sink:\n  type: \"datahub-rest\"\n  config:\n    server: 'http://localhost:8080'\n")),Object(r.b)("h3",{id:"datahub-kafka-datahub-kafka"},"DataHub Kafka ",Object(r.b)("inlineCode",{parentName:"h3"},"datahub-kafka")),Object(r.b)("p",null,"Pushes metadata to DataHub by publishing messages to Kafka. The advantage of the Kafka-based\ninterface is that it's asynchronous and can handle higher throughput. This requires the\nDatahub mce-consumer container to be running."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'sink:\n  type: "datahub-kafka"\n  config:\n    connection:\n      bootstrap: "localhost:9092"\n      producer_config: {}  # passed to https://docs.confluent.io/platform/current/clients/confluent-kafka-python/index.html#serializingproducer\n')),Object(r.b)("h3",{id:"console-console"},"Console ",Object(r.b)("inlineCode",{parentName:"h3"},"console")),Object(r.b)("p",null,"Simply prints each metadata event to stdout. Useful for experimentation and debugging purposes."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},'sink:\n  type: "console"\n')),Object(r.b)("h3",{id:"file-file-1"},"File ",Object(r.b)("inlineCode",{parentName:"h3"},"file")),Object(r.b)("p",null,"Outputs metadata to a file. This can be used to decouple metadata sourcing from the\nprocess of pushing it into DataHub, and is particularly useful for debugging purposes.\nNote that the file source can read files generated by this sink."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-yml"},"sink:\n  type: file\n  filename: ./path/to/mce/file.json\n")),Object(r.b)("h2",{id:"migrating-from-the-old-scripts"},"Migrating from the old scripts"),Object(r.b)("p",null,"If you were previously using the ",Object(r.b)("inlineCode",{parentName:"p"},"mce_cli.py")," tool to push metadata into DataHub: the new way for doing this is by creating a recipe with a file source pointing at your JSON file and a DataHub sink to push that metadata into DataHub.\nThis ",Object(r.b)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/examples/recipes/example_to_datahub_rest.yml"},"example recipe")," demonstrates how to ingest the ",Object(r.b)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/examples/mce_files/bootstrap_mce.json"},"sample data")," (previously called ",Object(r.b)("inlineCode",{parentName:"p"},"bootstrap_mce.dat"),") into DataHub over the REST API.\nNote that we no longer use the ",Object(r.b)("inlineCode",{parentName:"p"},".dat")," format, but instead use JSON. The main differences are that the JSON uses ",Object(r.b)("inlineCode",{parentName:"p"},"null")," instead of ",Object(r.b)("inlineCode",{parentName:"p"},"None")," and uses objects/dictionaries instead of tuples when representing unions."),Object(r.b)("p",null,"If you were previously using one of the ",Object(r.b)("inlineCode",{parentName:"p"},"sql-etl")," scripts: the new way for doing this is by using the associated source. See ",Object(r.b)("a",{parentName:"p",href:"#Sources"},"below")," for configuration details. Note that the source needs to be paired with a sink - likely ",Object(r.b)("inlineCode",{parentName:"p"},"datahub-kafka")," or ",Object(r.b)("inlineCode",{parentName:"p"},"datahub-rest"),", depending on your needs."),Object(r.b)("h2",{id:"contributing"},"Contributing"),Object(r.b)("p",null,"Contributions welcome!"),Object(r.b)("h3",{id:"code-layout"},"Code layout"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"The CLI interface is defined in ",Object(r.b)("a",{parentName:"li",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/src/datahub/entrypoints.py"},"entrypoints.py"),"."),Object(r.b)("li",{parentName:"ul"},"The high level interfaces are defined in the ",Object(r.b)("a",{parentName:"li",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/api"},"API directory"),"."),Object(r.b)("li",{parentName:"ul"},"The actual ",Object(r.b)("a",{parentName:"li",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source"},"sources")," and ",Object(r.b)("a",{parentName:"li",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/sink"},"sinks")," implementations have their own directories - the ",Object(r.b)("inlineCode",{parentName:"li"},"__init__.py")," files in those directories are used to register the short codes for use in recipes."),Object(r.b)("li",{parentName:"ul"},"The metadata models are created using code generation, and eventually live in the ",Object(r.b)("inlineCode",{parentName:"li"},"./src/datahub/metadata")," directory. However, these files are not checked in and instead are generated at build time. See the ",Object(r.b)("a",{parentName:"li",href:"https://github.com/linkedin/datahub/blob/master/metadata-ingestion/scripts/codegen.sh"},"codegen")," script for details.")),Object(r.b)("h3",{id:"testing"},"Testing"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"# Follow standard install procedure - see above.\n\n# Install requirements.\npip install -r test_requirements.txt\n\n# Run unit tests.\npytest tests/unit\n\n# Run integration tests.\n# Note: the integration tests require docker.\npytest tests/integration\n")),Object(r.b)("h3",{id:"sanity-check-code-before-committing"},"Sanity check code before committing"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-sh"},"# Requires test_requirements.txt to have been installed.\nblack --exclude 'datahub/metadata' -S -t py36 src tests\nisort src tests\nflake8 src tests\nmypy -p datahub\npytest\n")))}b.isMDXComponent=!0}}]);