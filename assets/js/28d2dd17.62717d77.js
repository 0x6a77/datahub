(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[9750],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||p[m]||r;return n?a.createElement(h,o(o({ref:t},d),{},{components:n})):a.createElement(h,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8601:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return s},default:function(){return d}});var a=n(2122),i=n(9756),r=(n(7294),n(3905)),o={title:"Frontend",hide_title:!0,slug:"/datahub-frontend",custom_edit_url:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/README.md"},l={unversionedId:"datahub-frontend/README",id:"datahub-frontend/README",isDocsHomePage:!1,title:"DataHub Frontend",description:"DataHub frontend is a Play service written in Java. It is served as a mid-tier",source:"@site/genDocs/datahub-frontend/README.md",sourceDirName:"datahub-frontend",slug:"/datahub-frontend",permalink:"/docs/datahub-frontend",editUrl:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/README.md",version:"current",frontMatter:{title:"Frontend",hide_title:!0,slug:"/datahub-frontend",custom_edit_url:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/README.md"},sidebar:"overviewSidebar",previous:{title:"DataHub React App",permalink:"/docs/datahub-web-react"},next:{title:"GraphQL Core",permalink:"/docs/datahub-graphql-core"}},s=[{value:"Pre-requisites",id:"pre-requisites",children:[]},{value:"Build",id:"build",children:[]},{value:"Dependencies",id:"dependencies",children:[]},{value:"Start via Docker image",id:"start-via-docker-image",children:[]},{value:"Start via command line",id:"start-via-command-line",children:[]},{value:"Checking out DataHub UI",id:"checking-out-datahub-ui",children:[]},{value:"Sample API calls",id:"sample-api-calls",children:[{value:"Browse APIs",id:"browse-apis",children:[]},{value:"Search APIs",id:"search-apis",children:[]},{value:"Dataset APIs",id:"dataset-apis",children:[]},{value:"User APIs",id:"user-apis",children:[]}]},{value:"Authentication",id:"authentication",children:[{value:"Authentication in React",id:"authentication-in-react",children:[]},{value:"API Debugging",id:"api-debugging",children:[]}]}],u={toc:s};function d(e){var t=e.components,n=(0,i.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"DataHub frontend is a ",(0,r.kt)("a",{parentName:"p",href:"https://www.playframework.com/"},"Play")," service written in Java. It is served as a mid-tier\nbetween ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/gms"},"DataHub GMS")," which is the backend service and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/datahub-web"},"DataHub Web"),"."),(0,r.kt)("h2",{id:"pre-requisites"},"Pre-requisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You need to have ",(0,r.kt)("a",{parentName:"li",href:"https://www.oracle.com/java/technologies/jdk8-downloads.html"},"JDK8"),"\ninstalled on your machine to be able to build ",(0,r.kt)("inlineCode",{parentName:"li"},"DataHub Frontend"),"."),(0,r.kt)("li",{parentName:"ul"},"You need to have ",(0,r.kt)("a",{parentName:"li",href:"https://www.google.com/chrome/"},"Chrome")," web browser\ninstalled to be able to build because UI tests have a dependency on ",(0,r.kt)("inlineCode",{parentName:"li"},"Google Chrome"),".")),(0,r.kt)("h2",{id:"build"},"Build"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"DataHub Frontend")," is already built as part of top level build:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./gradlew build\n")),(0,r.kt)("p",null,"However, if you only want to build ",(0,r.kt)("inlineCode",{parentName:"p"},"DataHub Frontend")," specifically:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"./gradlew :datahub-frontend:build\n")),(0,r.kt)("h2",{id:"dependencies"},"Dependencies"),(0,r.kt)("p",null,"Before starting ",(0,r.kt)("inlineCode",{parentName:"p"},"DataHub Frontend"),", you need to make sure that ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/gms"},"DataHub GMS")," and\nall its dependencies have already started and running."),(0,r.kt)("p",null,"Also, user information should already be registered into the DB,\notherwise user will not be able to sign in.\nTo do that, first create a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"user.dat")," containing below line and filling the parts ",(0,r.kt)("inlineCode",{parentName:"p"},"<<something>>"),"\nwith your information:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"auditHeader": None, "proposedSnapshot": ("com.linkedin.pegasus2avro.metadata.snapshot.CorpUserSnapshot", {"urn": "urn:li:corpuser:<<username>>", "aspects": [{"active": True, "fullName": "<<Full Name>>", "email": "<<e-mail address>>"}, {}]}), "proposedDelta": None}\n')),(0,r.kt)("p",null,"And run ",(0,r.kt)("inlineCode",{parentName:"p"},"mce producer")," script as below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python metadata-ingestion/mce_cli.py produce -d user.dat\n")),(0,r.kt)("p",null,"Or, you can run the script without providing any data file. In this case, the script will use ",(0,r.kt)("inlineCode",{parentName:"p"},"bootstrap_mce.dat")," file\nto bootstrap some sample users and datasets:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"python metadata-ingestion/mce_cli.py produce\n")),(0,r.kt)("p",null,"This will create a default user with username ",(0,r.kt)("inlineCode",{parentName:"p"},"datahub"),". You can sign in to the app using ",(0,r.kt)("inlineCode",{parentName:"p"},"datahub")," as your username."),(0,r.kt)("h2",{id:"start-via-docker-image"},"Start via Docker image"),(0,r.kt)("p",null,"Quickest way to try out ",(0,r.kt)("inlineCode",{parentName:"p"},"DataHub Frontend")," is running the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/docker/datahub-frontend"},"Docker image"),"."),(0,r.kt)("h2",{id:"start-via-command-line"},"Start via command line"),(0,r.kt)("p",null,"If you do modify things and want to try it out quickly without building the Docker image, you can also run\nthe application directly from command line after a successful ",(0,r.kt)("a",{parentName:"p",href:"#build"},"build"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cd datahub-frontend/run && ./run-local-frontend\n")),(0,r.kt)("h2",{id:"checking-out-datahub-ui"},"Checking out DataHub UI"),(0,r.kt)("p",null,"After starting your application in one of the two ways mentioned above, you can connect to it by typing below\ninto your favorite web browser:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"http://localhost:9001\n")),(0,r.kt)("p",null,"To be able to sign in, you need to provide your user name. You don't need to type any password."),(0,r.kt)("h2",{id:"sample-api-calls"},"Sample API calls"),(0,r.kt)("p",null,"All APIs for the application are defined in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/conf/routes"},"routes")," file. Below, you can find sample curl calls to these APIs\nand their responses."),(0,r.kt)("h3",{id:"browse-apis"},"Browse APIs"),(0,r.kt)("h4",{id:"getting-current-browse-path"},"Getting current browse path"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/browsePaths?type=dataset&urn=urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)\n[\n"/PROD/kafka/pageviews"\n]\n')),(0,r.kt)("h4",{id:"browsing-datasets"},"Browsing datasets"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/browse?type=dataset&path=/prod\n{\n    "elements": [],\n    "start": 0,\n    "count": 0,\n    "total": 1,\n    "metadata": {\n        "totalNumEntities": 1,\n        "path": "",\n        "groups": [{\n            "name": "prod",\n            "count": 1\n        }]\n    }\n}\n')),(0,r.kt)("h3",{id:"search-apis"},"Search APIs"),(0,r.kt)("h4",{id:"search-query"},"Search query"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/search?type=dataset&input=page\n{\n    "elements": [{\n        "origin": "PROD",\n        "name": "pageviews",\n        "platform": "urn:li:dataPlatform:kafka"\n    }],\n    "start": 0,\n    "count": 10,\n    "total": 1,\n    "searchResultMetadatas": [{\n        "name": "platform",\n        "aggregations": {\n            "kafka": 1\n        }\n    }, {\n        "name": "origin",\n        "aggregations": {\n            "prod": 1\n        }\n    }]\n}\n')),(0,r.kt)("h4",{id:"autocomplete-query"},"Autocomplete query"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/autocomplete?type=dataset&field=name&input=page\n{\n    "query": "page",\n    "suggestions": ["pageviews"]\n}\n')),(0,r.kt)("h3",{id:"dataset-apis"},"Dataset APIs"),(0,r.kt)("h4",{id:"getting-basic-dataset-metadata"},"Getting basic dataset metadata"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/datasets/urn:li:dataset:(urn:li:dataPlatform:kafka,pageviewsevent,PROD)\n{\n    "dataset": {\n        "platform": "kafka",\n        "nativeName": "pageviewsevent",\n        "fabric": "PROD",\n        "uri": "urn:li:dataset:(urn:li:dataPlatform:kafka,pageviewsevent,PROD)",\n        "description": "",\n        "nativeType": null,\n        "properties": null,\n        "tags": [],\n        "removed": null,\n        "deprecated": null,\n        "deprecationNote": null,\n        "decommissionTime": null,\n        "createdTime": null,\n        "modifiedTime": null\n    }\n}\n')),(0,r.kt)("h4",{id:"getting-dataset-schema"},"Getting dataset schema"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/datasets/urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)/schema\n{\n    "schema": {\n        "schemaless": false,\n        "rawSchema": "{\\"type\\":\\"record\\",\\"name\\":\\"MetadataChangeEvent\\",\\"namespace\\":\\"com.linkedin.pegasus2avro.mxe\\",\\"doc\\":\\"Kafka event for proposing a metadata change for an entity.\\",\\"fields\\":[{\\"name\\":\\"auditHeader\\",\\"type\\":{\\"type\\":\\"record\\",\\"name\\":\\"KafkaAuditHeader\\",\\"namespace\\":\\"com.linkedin.pegasus2avro.avro2pegasus.events\\",\\"doc\\":\\"Header\\"}}]}",\n        "keySchema": null,\n        "columns": [{\n            "id": null,\n            "sortID": 0,\n            "parentSortID": 0,\n            "fieldName": "foo",\n            "parentPath": null,\n            "fullFieldPath": "foo",\n            "dataType": "string",\n            "comment": "Bar",\n            "commentCount": null,\n            "partitionedStr": null,\n            "partitioned": false,\n            "nullableStr": null,\n            "nullable": false,\n            "indexedStr": null,\n            "indexed": false,\n            "distributedStr": null,\n            "distributed": false,\n            "treeGridClass": null\n        }],\n        "lastModified": 0\n    }\n}\n')),(0,r.kt)("h4",{id:"getting-owners-of-a-dataset"},"Getting owners of a dataset"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/datasets/urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)/owners\n{\n    "owners": [{\n        "userName": "ksahin",\n        "source": "UI",\n        "namespace": "urn:li:corpuser",\n        "name": "Kerem Sahin",\n        "email": "ksahin@linkedin.com",\n        "isGroup": false,\n        "isActive": true,\n        "idType": "USER",\n        "type": "DataOwner",\n        "subType": null,\n        "sortId": null,\n        "sourceUrl": null,\n        "confirmedBy": "UI",\n        "modifiedTime": 0\n    }, {\n        "userName": "datahub",\n        "source": "UI",\n        "namespace": "urn:li:corpuser",\n        "name": "Data Hub",\n        "email": "datahub@linkedin.com",\n        "isGroup": false,\n        "isActive": true,\n        "idType": "USER",\n        "type": "DataOwner",\n        "subType": null,\n        "sortId": null,\n        "sourceUrl": null,\n        "confirmedBy": "UI",\n        "modifiedTime": 0\n    }],\n    "fromUpstream": false,\n    "datasetUrn": "urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)",\n    "lastModified": 0,\n    "actor": "ksahin"\n}\n')),(0,r.kt)("h4",{id:"getting-dataset-documents"},"Getting dataset documents"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/datasets/urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)/institutionalmemory\n{\n    "elements": [{\n        "description": "Sample doc",\n        "createStamp": {\n            "actor": "urn:li:corpuser:ksahin",\n            "time": 0\n        },\n        "url": "https://www.linkedin.com"\n    }]\n}\n')),(0,r.kt)("h4",{id:"getting-upstreams-of-a-dataset"},"Getting upstreams of a dataset"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v2/datasets/urn:li:dataset:(urn:li:dataPlatform:kafka,pageviews,PROD)/upstreams\n[{\n    "dataset": {\n        "platform": "kafka",\n        "nativeName": "pageViewsUpstream",\n        "fabric": "PROD",\n        "uri": "urn:li:dataset:(urn:li:dataPlatform:kafka,pageViewsUpstream,PROD)",\n        "description": "",\n        "nativeType": null,\n        "properties": null,\n        "tags": [],\n        "removed": null,\n        "deprecated": null,\n        "deprecationNote": null,\n        "decommissionTime": null,\n        "createdTime": null,\n        "modifiedTime": null\n    },\n    "type": "TRANSFORMED",\n    "actor": "urn:li:corpuser:ksahin",\n    "modified": null\n}]\n')),(0,r.kt)("h3",{id:"user-apis"},"User APIs"),(0,r.kt)("h4",{id:"getting-basic-user-metadata"},"Getting basic user metadata"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v1/user/me\n{\n    "user": {\n        "id": 0,\n        "userName": "ksahin",\n        "departmentNum": 0,\n        "email": "ksahin@linkedin.com",\n        "name": "Kerem Sahin",\n        "pictureLink": "https://content.linkedin.com/content/dam/me/business/en-us/amp/brand-site/v2/bg/LI-Bug.svg.original.svg",\n        "userSetting": null\n    },\n    "status": "ok"\n}\n')),(0,r.kt)("h4",{id:"getting-all-users"},"Getting all users"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'http://localhost:9001/api/v1/party/entities\n{\n    "status": "ok",\n    "userEntities": [{\n        "label": "ksahin",\n        "category": "person",\n        "displayName": null,\n        "pictureLink": "https://content.linkedin.com/content/dam/me/business/en-us/amp/brand-site/v2/bg/LI-Bug.svg.original.svg"\n    }, {\n        "label": "datahub",\n        "category": "person",\n        "displayName": null,\n        "pictureLink": "https://content.linkedin.com/content/dam/me/business/en-us/amp/brand-site/v2/bg/LI-Bug.svg.original.svg"\n    }]\n}\n')),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"DataHub frontend leverages ",(0,r.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javase/7/docs/technotes/guides/security/jaas/JAASRefGuide.html"},"Java Authentication and Authorization Service (JAAS)")," to perform the authentication. By default we provided a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/app/security/DummyLoginModule.java"},"DummyLoginModule")," which will accept any username/password combination. You can update ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/linkedin/datahub/blob/master/datahub-frontend/conf/jaas.conf"},"jaas.conf")," to match your authentication requirement. For example, use the following config for LDAP-based authentication,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'WHZ-Authentication {\n\xa0\xa0com.sun.security.auth.module.LdapLoginModule sufficient\n\xa0\xa0userProvider="ldaps://<host>:636/dc=<domain>"\n\xa0\xa0authIdentity="{USERNAME}"\n\xa0\xa0userFilter="(&(objectClass=person)(uid={USERNAME}))"\n\xa0\xa0java.naming.security.authentication="simple"\n\xa0\xa0debug="false"\n\xa0\xa0useSSL="true";\n};\n')),(0,r.kt)("h3",{id:"authentication-in-react"},"Authentication in React"),(0,r.kt)("p",null,"The React app supports both JAAS as described above and separately OIDC authentication. To learn about configuring OIDC for React,\nsee the ",(0,r.kt)("a",{parentName:"p",href:"/docs/how/configure-oidc-react"},"OIDC in React")," document. "),(0,r.kt)("h3",{id:"api-debugging"},"API Debugging"),(0,r.kt)("p",null,"Most DataHub frontend API endpoints are protected using ",(0,r.kt)("a",{parentName:"p",href:"https://www.playframework.com/documentation/2.1.0/JavaGuide4"},"Play Authentication"),", which means it requires authentication information stored in the cookie for the request to go through. This makes debugging using curl difficult. One option is to first make a curl call against the ",(0,r.kt)("inlineCode",{parentName:"p"},"/authenticate")," endpoint and stores the authentication info in a cookie file like this"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -c cookie.txt -d \'{"username":"datahub", "password":"datahub"}\' -H \'Content-Type: application/json\' http://localhost:9001/authenticate\n')),(0,r.kt)("p",null,"You can then make all subsequent calls using the same cookie file to pass the authentication check."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -b cookie.txt "http://localhost:9001/api/v2/search?type=dataset&input=page"\n')))}d.isMDXComponent=!0}}]);