<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2G54RXWD4D"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2G54RXWD4D",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="DataHub" href="/opensearch.xml"><title data-react-helmet="true">Deploying to AWS | DataHub</title><meta data-react-helmet="true" property="og:url" content="https://datahubproject.io/docs/deploy/aws"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deploying to AWS | DataHub"><meta data-react-helmet="true" name="description" content="The following is a set of instructions to quickstart DataHub on AWS Elastic Kubernetes Service (EKS). Note, the guide"><meta data-react-helmet="true" property="og:description" content="The following is a set of instructions to quickstart DataHub on AWS Elastic Kubernetes Service (EKS). Note, the guide"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://datahubproject.io/docs/deploy/aws"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/deploy/aws" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/deploy/aws" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1de1be40.css">
<link rel="preload" href="/assets/js/runtime~main.e0fcaa61.js" as="script">
<link rel="preload" href="/assets/js/main.40eb1546.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo-color.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">DataHub</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/demo">Demo</a><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link navbar-saas-button button button--primary" href="/docs/saas">SaaS</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo-color.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">DataHub</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/demo">Demo</a></li><li class="menu__list-item"><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a class="menu__link navbar-saas-button button button--primary" href="/docs/saas">SaaS</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DataHub</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/features">Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/demo">Demo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/saas">SaaS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/releases">Releases</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/quickstart">Quickstart Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/debugging">Debugging Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion">Metadata Ingestion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/policies">Policies Guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/architecture">Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/metadata-ingestion">Metadata Ingestion Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/metadata-serving">Serving Architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Metadata Ingestion</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion">Quickstart</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Sources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/athena">Athena</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/azure-ad">Azure AD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/bigquery">BigQuery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/business_glossary">Business Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/dbt">dbt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/druid">Druid</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/feast">Feast</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/file">File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/glue">Glue</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/hive">Hive</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/kafka-connect">Kafka Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/kafka">Kafka Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/looker">Looker dashboards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/lookml">LookML</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/mongodb">MongoDB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/mssql">Microsoft SQL Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/mysql">MySQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/okta">Okta</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/oracle">Oracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/postgres">PostgreSQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/redash">Redash</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/redshift">Redshift</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/sagemaker">SageMaker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/snowflake">Snowflake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/sql_profiles">SQL Profiles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/sqlalchemy">Other SQLAlchemy databases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/superset">Superset</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Sinks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/sink_docs/console">Console</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/sink_docs/datahub">DataHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/sink_docs/file">File</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Metadata Modeling</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-modeling/metadata-model">The Metadata Model</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-modeling/extending-the-metadata-model">Extending the Metadata Model</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">GraphQL API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/graphql/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/queries">Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/objects">Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/inputObjects">Inputs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/interfaces">Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/unions">Unions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/enums">Enums</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/graphql/scalars">Scalars</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/graphql/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/graphql/querying-entities">Querying Metadata Entities</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers">Developer&#x27;s Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docker/development">Using Docker Images During Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/adding-source">Adding a Metadata Ingestion Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/source_docs/s3">Ingesting files from S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/transformers">Using transformers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/auth/jaas">JaaS Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/auth/sso/configure-oidc-react">OIDC Authentication in React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/auth/sso/configure-oidc-react-google">Configuring Google Authentication for React App (OIDC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/auth/sso/configure-oidc-react-okta">Configuring Okta Authentication for React App (OIDC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/restore-indices">Restoring Search and Graph Indices from Local Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/extract-container-logs">How to Extract Logs from DataHub Containers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/delete-metadata">Removing Metadata from DataHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-web-react/src/app/analytics">React Analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/developing">Developing on Metadata Ingestion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docker/airflow/local_airflow">Running Airflow locally with DataHub</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-web-react">React App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-frontend">Frontend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-graphql-core">GraphQL Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-service">Metadata Service (Also known as GMS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-gms-graphql-service">GMS GraphQL Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-jobs/mae-consumer-job">MetadataAuditEvent (MAE) Consumer Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-jobs/mce-consumer-job">MetadataChangeEvent (MCE) Consumer Job</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/no-code-modeling">No Code Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/aspect-versioning">Aspect Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/es-7-upgrade">Elasticsearch upgrade from 5.6.8 to 7.9.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/high-cardinality">High Cardinality Relationships</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/no-code-upgrade">No Code Upgrade (In-Place Migration Guide)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/migrating-graph-service-implementation">Migrate Graph Service Implementation to Elasticsearch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/mcp-mcl">MetadataChangeProposal &amp; MetadataChangeLog Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/field-path-spec-v2">SchemaFieldPath Specification (Version 2)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/monitoring">Monitoring DataHub</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/how/kafka-config">Configuring Kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docker">Deploying with Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/kubernetes">Deploying with Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docker/datahub-upgrade">Upgrade Docker Image</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/deploy/aws">Deploying to AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/gcp">Deploying to GCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/deploy/confluent-cloud">Integrating with Confluent Cloud</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/slack">Slack</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/links">Articles &amp; Talks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/townhalls">Town Halls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/townhall-history">Town Hall History</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/code_of_conduct">Contributor Covenant Code of Conduct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc">RFC Process</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RFCs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1778-dashboards">Dashboards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1812-ml_models">Machine Learning Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1820-azkaban-flow-job">Azkaban Flows and Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1841-lineage/field_level_lineage">RFC - Field Level Lineage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1842-business_glossary">Business Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/2042-graphql_frontend/queries">GraphQL Frontend (Part 1)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/2055-react-app">Proposal to Incubate a new React Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/access-control/access-control">RBAC: Fine-grained Access Controls in DataHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/tags">Tags</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">AWS setup guide</h1></header><p>The following is a set of instructions to quickstart DataHub on AWS Elastic Kubernetes Service (EKS). Note, the guide
assumes that you do not have a kubernetes cluster set up. If you are deploying DataHub to an existing cluster, please
skip the corresponding sections.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>This guide requires the following tools:</p><ul><li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">kubectl</a> to manage kubernetes resources</li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">helm</a> to deploy the resources based on helm charts. Note, we only support Helm
3.</li><li><a href="https://eksctl.io/introduction/#installation" target="_blank" rel="noopener noreferrer">eksctl</a> to create and manage clusters on EKS</li><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html" target="_blank" rel="noopener noreferrer">AWS CLI</a> to manage AWS resources</li></ul><p>To use the above tools, you need to set up AWS credentials by following
this <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html" target="_blank" rel="noopener noreferrer">guide</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="start-up-a-kubernetes-cluster-on-aws-eks"></a>Start up a kubernetes cluster on AWS EKS<a class="hash-link" href="#start-up-a-kubernetes-cluster-on-aws-eks" title="Direct link to heading">#</a></h2><p>Let’s follow this <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html" target="_blank" rel="noopener noreferrer">guide</a> to create a new
cluster using eksctl. Run the following command with cluster-name set to the cluster name of choice, and region set to
the AWS region you are operating on.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create cluster \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --name &lt;&lt;cluster-name&gt;&gt; \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --region &lt;&lt;region&gt;&gt; \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --with-oidc \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --nodes=3</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The command will provision an EKS cluster powered by 3 EC2 m3.large nodes and provision a VPC based networking layer.</p><p>If you are planning to run the storage layer (MySQL, Elasticsearch, Kafka) as pods in the cluster, you need at least 3
nodes. If you decide to use managed storage services, you can reduce the number of nodes or use m3.medium nodes to save
cost. Refer to this <a href="https://eksctl.io/usage/creating-and-managing-clusters/" target="_blank" rel="noopener noreferrer">guide</a> to further customize the cluster
before provisioning.</p><p>Note, OIDC setup is required for following this guide when setting up the load balancer.</p><p>Run <code>kubectl get nodes</code> to confirm that the cluster has been setup correctly. You should get results like below</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                          STATUS   ROLES    AGE   VERSION</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-192-168-49-49.us-west-2.compute.internal   Ready    &lt;none&gt;   3h    v1.18.9-eks-d1db3c</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-192-168-64-56.us-west-2.compute.internal   Ready    &lt;none&gt;   3h    v1.18.9-eks-d1db3c</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-192-168-8-126.us-west-2.compute.internal   Ready    &lt;none&gt;   3h    v1.18.9-eks-d1db3c</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup-datahub-using-helm"></a>Setup DataHub using Helm<a class="hash-link" href="#setup-datahub-using-helm" title="Direct link to heading">#</a></h2><p>Once the kubernetes cluster has been set up, you can deploy DataHub and it’s prerequisites using helm. Please follow the
steps in this <a href="/docs/deploy/kubernetes">guide</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="expose-endpoints-using-a-load-balancer"></a>Expose endpoints using a load balancer<a class="hash-link" href="#expose-endpoints-using-a-load-balancer" title="Direct link to heading">#</a></h2><p>Now that all the pods are up and running, you need to expose the datahub-frontend end point by setting
up <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener noreferrer">ingress</a>. To do this, you need to first set up an
ingress controller. There are
many <a href="https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/" target="_blank" rel="noopener noreferrer">ingress controllers</a>  to choose
from, but here, we will follow
this <a href="https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html" target="_blank" rel="noopener noreferrer">guide</a> to set up the AWS
Application Load Balancer(ALB) Controller.</p><p>First, if you did not use eksctl to setup the kubernetes cluster, make sure to go through the prerequisites listed
<a href="https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Download the IAM policy document for allowing the controller to make calls to AWS APIs on your behalf.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.0/docs/install/iam_policy.json</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Create an IAM policy based on the policy document by running the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam create-policy \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --policy-name AWSLoadBalancerControllerIAMPolicy \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    --policy-document file://iam_policy.json</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Use eksctl to create a service account that allows us to attach the above policy to kubernetes pods.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create iamserviceaccount \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cluster=&lt;&lt;cluster-name&gt;&gt; \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace=kube-system \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name=aws-load-balancer-controller \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --attach-policy-arn=arn:aws:iam::&lt;&lt;account-id&gt;&gt;:policy/AWSLoadBalancerControllerIAMPolicy \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --override-existing-serviceaccounts \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --approve      </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Install the TargetGroupBinding custom resource definition by running the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -k &quot;github.com/aws/eks-charts/stable/aws-load-balancer-controller//crds?ref=master&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Add the helm chart repository containing the latest version of the ALB controller.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add eks https://aws.github.io/eks-charts</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Install the controller into the kubernetes cluster by running the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade -i aws-load-balancer-controller eks/aws-load-balancer-controller \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set clusterName=&lt;&lt;cluster-name&gt;&gt; \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set serviceAccount.create=false \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --set serviceAccount.name=aws-load-balancer-controller \</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -n kube-system</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Verify the install completed by running <code>kubectl get deployment -n kube-system aws-load-balancer-controller</code>. It should
return a result like the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws-load-balancer-controller   2/2     2            2           142m</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now that the controller has been set up, we can enable ingress by updating the values.yaml (or any other values.yaml
file used to deploy datahub). Change datahub-frontend values to the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">datahub-frontend:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enabled: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  image:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    repository: linkedin/datahub-frontend-react</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tag: &quot;latest&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ingress:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    annotations:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      kubernetes.io/ingress.class: alb</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/scheme: internet-facing</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/target-type: instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/certificate-arn: &lt;&lt;certificate-arn&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/inbound-cidrs: 0.0.0.0/0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/listen-ports: &#x27;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;:443}]&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      alb.ingress.kubernetes.io/actions.ssl-redirect: &#x27;{&quot;Type&quot;: &quot;redirect&quot;, &quot;RedirectConfig&quot;: { &quot;Protocol&quot;: &quot;HTTPS&quot;, &quot;Port&quot;: &quot;443&quot;, &quot;StatusCode&quot;: &quot;HTTP_301&quot;}}&#x27;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    hosts:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - host: &lt;&lt;host-name&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        redirectPaths:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          - path: /*</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name: ssl-redirect</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            port: use-annotation</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        paths:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          - /*</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You need to request a certificate in the AWS Certificate Manager by following this
<a href="https://docs.aws.amazon.com/acm/latest/userguide/gs-acm-request-public.html" target="_blank" rel="noopener noreferrer">guide</a>, and replace certificate-arn with
the ARN of the new certificate. You also need to replace host-name with the hostname of choice like
demo.datahubproject.io.</p><p>After updating the yaml file, run the following to apply the updates.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install datahub datahub/datahub --values values.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Once the upgrade completes, run <code>kubectl get ingress</code> to verify the ingress setup. You should see a result like the
following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       CLASS    HOSTS                         ADDRESS                                                                 PORTS   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">datahub-datahub-frontend   &lt;none&gt;   demo.datahubproject.io   k8s-default-datahubd-80b034d83e-904097062.us-west-2.elb.amazonaws.com   80      3h5m</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note down the elb address in the address column. Add the DNS CNAME record to the host domain pointing the host-name (
from above) to the elb address. DNS updates generally take a few minutes to an hour. Once that is done, you should be
able to access datahub-frontend through the host-name.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-aws-managed-services-for-the-storage-layer"></a>Use AWS managed services for the storage layer<a class="hash-link" href="#use-aws-managed-services-for-the-storage-layer" title="Direct link to heading">#</a></h2><p>Managing the storage services like MySQL, Elasticsearch, and Kafka as kubernetes pods requires a great deal of
maintenance workload. To reduce the workload, you can use managed services like AWS <a href="https://aws.amazon.com/rds" target="_blank" rel="noopener noreferrer">RDS</a>,
<a href="https://aws.amazon.com/elasticsearch-service/" target="_blank" rel="noopener noreferrer">Elasticsearch Service</a>, and <a href="https://aws.amazon.com/msk/" target="_blank" rel="noopener noreferrer">Managed Kafka</a>
as the storage layer for DataHub. Support for using AWS Neptune as graph DB is coming soon.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rds"></a>RDS<a class="hash-link" href="#rds" title="Direct link to heading">#</a></h3><p>Provision a MySQL database in AWS RDS that shares the VPC with the kubernetes cluster or has VPC peering set up between
the VPC of the kubernetes cluster. Once the database is provisioned, you should be able to see the following page. Take
a note of the endpoint marked by the red box.</p><p><img alt="AWS RDS" src="/assets/images/aws-rds-bf6c0fee9db2d5bac76a8f5d2699f765.png"></p><p>First, add the DB password to kubernetes by running the following.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete secret mysql-secrets</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create secret generic mysql-secrets --from-literal=mysql-root-password=&lt;&lt;password&gt;&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Update the sql settings under global in the values.yaml as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  sql:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    datasource:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      host: &quot;&lt;&lt;rds-endpoint&gt;&gt;:3306&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      hostForMysqlClient: &quot;&lt;&lt;rds-endpoint&gt;&gt;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      port: &quot;3306&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      url: &quot;jdbc:mysql://&lt;&lt;rds-endpoint&gt;&gt;:3306/datahub?verifyServerCertificate=false&amp;useSSL=true&amp;useUnicode=yes&amp;characterEncoding=UTF-8&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      driver: &quot;com.mysql.jdbc.Driver&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      username: &quot;root&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      password:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        secretRef: mysql-secrets</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        secretKey: mysql-root-password</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Run <code>helm upgrade --install datahub datahub/datahub --values values.yaml</code> to apply the changes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="elasticsearch-service"></a>Elasticsearch Service<a class="hash-link" href="#elasticsearch-service" title="Direct link to heading">#</a></h3><p>Provision an elasticsearch domain running elasticsearch version 7.9 or above that shares the VPC with the kubernetes
cluster or has VPC peering set up between the VPC of the kubernetes cluster. Once the domain is provisioned, you should
be able to see the following page. Take a note of the endpoint marked by the red box.</p><p><img alt="AWS Elasticsearch Service" src="/assets/images/aws-elasticsearch-938752b80fce89de4b06290e50b04e1d.png"></p><p>Update the elasticsearch settings under global in the values.yaml as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  elasticsearch:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    host: &lt;&lt;elasticsearch-endpoint&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    port: &quot;443&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    indexPrefix: demo</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    useSSL: &quot;true&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can also allow communication via HTTP (without SSL) by using the settings below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  elasticsearch:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    host: &lt;&lt;elasticsearch-endpoint&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    port: &quot;80&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    indexPrefix: demo</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Lastly, you need to set the following env variable for <strong>elasticsearchSetupJob</strong>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  elasticsearchSetupJob:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled: true</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      repository: linkedin/datahub-elasticsearch-setup</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      tag: &quot;***&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    extraEnvs:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - name: USE_AWS_ELASTICSEARCH</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        value: &quot;true&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Run <code>helm upgrade --install datahub datahub/datahub --values values.yaml</code> to apply the changes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="managed-streaming-for-apache-kafka-msk"></a>Managed Streaming for Apache Kafka (MSK)<a class="hash-link" href="#managed-streaming-for-apache-kafka-msk" title="Direct link to heading">#</a></h3><p>Provision an MSK cluster that shares the VPC with the kubernetes cluster or has VPC peering set up between the VPC of
the kubernetes cluster. Once the domain is provisioned, click on the “View client information” button in the ‘Cluster
Summary” section. You should see a page like below. Take a note of the endpoints marked by the red boxes.</p><p><img alt="AWS MSK" src="/assets/images/aws-msk-b31bc0807c69c546974e922a2079cb1c.png"></p><p>Update the kafka settings under global in the values.yaml as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kafka:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bootstrap:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      server: &quot;&lt;&lt;bootstrap-server endpoint&gt;&gt;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    zookeeper:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      server:  &quot;&lt;&lt;zookeeper endpoint&gt;&gt;&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    schemaregistry:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      url: &quot;http://prerequisites-cp-schema-registry:8081&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    partitions: 3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    replicationFactor: 3</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note, the number of partitions and replicationFactor should match the number of bootstrap servers. This is by default 3
for AWS MSK.</p><p>Run <code>helm upgrade --install datahub datahub/datahub --values values.yaml</code> to apply the changes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aws-glue-schema-registry"></a>AWS Glue Schema Registry<a class="hash-link" href="#aws-glue-schema-registry" title="Direct link to heading">#</a></h3><p>You can use AWS Glue schema registry instead of the kafka schema registry. To do so, first provision an AWS Glue schema
registry in the &quot;Schema Registry&quot; tab in the AWS Glue console page.</p><p>Once the registry is provisioned, you can change helm chart as follows.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kafka:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bootstrap:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    zookeeper:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    schemaregistry:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      type: AWS_GLUE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      glue:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        region: &lt;&lt;AWS region of registry&gt;&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        registry: &lt;&lt;name of registry&gt;&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note, it will use the name of the topic as the schema name in the registry.</p><p>Before you update the pods, you need to give the k8s worker nodes the correct permissions to access the schema registry.</p><p>The minimum permissions required looks like this</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Version&quot;: &quot;2012-10-17&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Statement&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Sid&quot;: &quot;VisualEditor0&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Effect&quot;: &quot;Allow&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Action&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetRegistry&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:ListRegistries&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:CreateSchema&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:UpdateSchema&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetSchema&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:ListSchemas&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:RegisterSchemaVersion&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetSchemaByDefinition&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetSchemaVersion&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetSchemaVersionsDiff&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:ListSchemaVersions&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:CheckSchemaVersionValidity&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:PutSchemaVersionMetadata&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:QuerySchemaVersionMetadata&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Resource&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;arn:aws:glue:*:795586375822:schema/*&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;arn:aws:glue:us-west-2:795586375822:registry/demo-shared&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Sid&quot;: &quot;VisualEditor1&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Effect&quot;: &quot;Allow&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Action&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;glue:GetSchemaVersion&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ],</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;Resource&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;*&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The latter part is required to have &quot;*&quot; as the resource because of an issue in the AWS Glue schema registry library.
Refer to <a href="https://github.com/awslabs/aws-glue-schema-registry/issues/68" target="_blank" rel="noopener noreferrer">this issue</a> for any updates.</p><p>Glue currently doesn&#x27;t support AWS Signature V4. As such, we cannot use service accounts to give permissions to access
the schema registry. The workaround is to give the above permission to the EKS worker node&#x27;s IAM role. Refer
to <a href="https://github.com/awslabs/aws-glue-schema-registry/issues/69" target="_blank" rel="noopener noreferrer">this issue</a> for any updates.</p><p>Run <code>helm upgrade --install datahub datahub/datahub --values values.yaml</code> to apply the changes.</p><p>Note, you will be seeing log &quot;Schema Version Id is null. Trying to register the schema&quot; on every request. This log is
misleading, so should be ignored. Schemas are cached, so it does not register a new version on every request (aka no
performance issues). This has been fixed by <a href="https://github.com/awslabs/aws-glue-schema-registry/pull/64" target="_blank" rel="noopener noreferrer">this PR</a> but
the code has not been released yet. We will update version once a new release is out.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/linkedin/datahub/blob/master/docs/deploy/aws.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docker/datahub-upgrade"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Upgrade Docker Image</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/deploy/gcp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying to GCP »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#start-up-a-kubernetes-cluster-on-aws-eks" class="table-of-contents__link">Start up a kubernetes cluster on AWS EKS</a></li><li><a href="#setup-datahub-using-helm" class="table-of-contents__link">Setup DataHub using Helm</a></li><li><a href="#expose-endpoints-using-a-load-balancer" class="table-of-contents__link">Expose endpoints using a load balancer</a></li><li><a href="#use-aws-managed-services-for-the-storage-layer" class="table-of-contents__link">Use AWS managed services for the storage layer</a><ul><li><a href="#rds" class="table-of-contents__link">RDS</a></li><li><a href="#elasticsearch-service" class="table-of-contents__link">Elasticsearch Service</a></li><li><a href="#managed-streaming-for-apache-kafka-msk" class="table-of-contents__link">Managed Streaming for Apache Kafka (MSK)</a></li><li><a href="#aws-glue-schema-registry" class="table-of-contents__link">AWS Glue Schema Registry</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Quickstart</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3qFQC5IiwR5fvWEqi_tJ5w" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/townhalls">Town Halls</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/#adoption">Adoption</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/demo">Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/roadmap">Roadmap</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2015-2021 DataHub Project Authors.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e0fcaa61.js"></script>
<script src="/assets/js/main.40eb1546.js"></script>
</body>
</html>