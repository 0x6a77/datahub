<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2G54RXWD4D"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2G54RXWD4D",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="DataHub" href="/opensearch.xml"><title data-react-helmet="true">Strongly Consistent Secondary Index | DataHub</title><meta data-react-helmet="true" property="og:url" content="https://datahubproject.io/docs/how/scsi-onboarding-guide"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Strongly Consistent Secondary Index | DataHub"><meta data-react-helmet="true" name="description" content="1. Create urn path extractor for your entity"><meta data-react-helmet="true" property="og:description" content="1. Create urn path extractor for your entity"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://datahubproject.io/docs/how/scsi-onboarding-guide"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/how/scsi-onboarding-guide" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/how/scsi-onboarding-guide" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.96c35e2c.css">
<link rel="preload" href="/assets/js/runtime~main.738a90de.js" as="script">
<link rel="preload" href="/assets/js/main.42056712.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo-color.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">DataHub</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Slack</a><a class="navbar__item navbar__link" href="/docs/demo">Demo</a><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo-color.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.png" alt="DataHub Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">DataHub</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="menu__link">Slack</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/demo">Demo</a></li><li class="menu__list-item"><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">DataHub</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/faq">DataHub FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/features">DataHub Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/roadmap">DataHub Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/demo">DataHub Demo Environment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/quickstart">DataHub Quickstart Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/debugging">Debugging Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion">DataHub Metadata Ingestion</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/architecture">DataHub Architecture Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/metadata-ingestion">Metadata Ingestion Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/architecture/metadata-serving">DataHub Serving Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-web-react">DataHub React App</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Metadata Modeling</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/entity">Entities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/aspect">What is a metadata aspect?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/urn">What is URN?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/relationship">What is a relationship?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/search-document">What is a search document?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/snapshot">What is a snapshot?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/delta">What is a metadata delta?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/mxe">What is MXE (Metadata Events)?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Developer Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/developers">DataHub Developer&#x27;s Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docker/development">Using Docker Images During Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion">DataHub Metadata Ingestion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/graph">What is GMA graph?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/what/search-index">What is GMA search index?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/add-new-aspect">How to add a new metadata aspect?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/build-metadata-service">Metadata Service Developer Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/customize-elasticsearch-query-template">How to customize the search experience of an entity?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/entity-onboarding">How to onboard an entity?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/graph-onboarding">How to onboard to GMA graph?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/metadata-modelling">How to model metadata ?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/demo/graph-onboarding">Onboarding to GMA Graph - Adding a new relationship type</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/search-onboarding">How to onboard to GMA search?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/search-over-new-field">Onboarding to GMA Search - searching over a new field</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/configure-oidc-react">OIDC Authentication in React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/sso/configure-oidc-react-google">Configuring Google Authentication for React App (OIDC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/sso/configure-oidc-react-okta">Configuring Okta Authentication for React App (OIDC)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-web-react/src/app/analytics">DataHub React Analytics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-web-react">DataHub React App</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-frontend">DataHub Frontend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-graphql-core">GraphQL Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gms">DataHub Generalized Metadata Store (GMS)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-gms-graphql-service">DataHub GMS GraphQL Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-jobs/mae-consumer-job">MetadataAuditEvent (MAE) Consumer Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-jobs/mce-consumer-job">MetadataChangeEvent (MCE) Consumer Job</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/metadata-ingestion/developing">Developing on Metadata Ingestion</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Advanced Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/aspect-versioning">Aspect Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/es-7-upgrade">Elasticsearch upgrade from 5.6.8 to 7.9.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/high-cardinality">High Cardinality Relationships</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/how/scsi-onboarding-guide">How to onboard to Strongly Consistent Secondary Index (SCSI)?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/how/kafka-config">How to configure Kafka?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docker">Docker Images</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datahub-kubernetes">Deploying Datahub with Kubernetes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/slack">Slack</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/links">Articles &amp; Talks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/townhalls">DataHub Town Halls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/townhall-history">Town Hall History</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/code_of_conduct">Contributor Covenant Code of Conduct</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc">DataHub RFC Process</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">RFCs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1778-dashboards">Dashboards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1812-ml_models">Machine Learning Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1820-azkaban-flow-job">Azkaban Flows and Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1841-lineage/field_level_lineage">RFC - Field Level Lineage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/1842-business_glossary">Business Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/2042-graphql_frontend/queries">GraphQL Frontend (Part 1)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/2055-react-app">Proposal to Incubate a new React Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/rfc/active/tags">Tags</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-create-urn-path-extractor-for-your-entity"></a>1. Create urn path extractor for your entity<a class="hash-link" href="#1-create-urn-path-extractor-for-your-entity" title="Direct link to heading">#</a></h2><p>This is to provide the parts of urn that need to be indexed as well as the logic to obtain the same from the urn. Refer to <a href="https://github.com/linkedin/datahub/blob/master/gms/impl/src/main/java/com/linkedin/metadata/urn/dataset/DatasetUrnPathExtractor.java" target="_blank" rel="noopener noreferrer">DatasetUrnPathExtractor</a> as an example.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-add-appropriate-docker-environment-variable-to-enable-scsi-for-your-entity"></a>2. Add appropriate docker environment variable to enable SCSI for your entity<a class="hash-link" href="#2-add-appropriate-docker-environment-variable-to-enable-scsi-for-your-entity" title="Direct link to heading">#</a></h2><p>Enable SCSI by adding your variable in docker environment <a href="https://github.com/linkedin/datahub/blob/master/docker/datahub-gms/env/docker.env" target="_blank" rel="noopener noreferrer">file</a> of datahub-gms. Each entity has it&#x27;s own environment variable. If corresponding variable of your entity is already defined in the docker environment file, then make sure it is set (in order to enable SCSI).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-enable-scsi-in-local-dao"></a>3. Enable SCSI in local DAO<a class="hash-link" href="#3-enable-scsi-in-local-dao" title="Direct link to heading">#</a></h2><p>Import the docker environment variable in your local DAO factory to enable SCSI. Refer to <a href="https://github.com/linkedin/datahub/blob/master/gms/factories/src/main/java/com/linkedin/gms/factory/dataset/DatasetDaoFactory.java" target="_blank" rel="noopener noreferrer">DatasetDaoFactory</a> as an example.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-define-storage-config-and-use-while-instantiating-your-dao"></a>4. Define Storage Config and use while instantiating your DAO<a class="hash-link" href="#4-define-storage-config-and-use-while-instantiating-your-dao" title="Direct link to heading">#</a></h2><p>Other than the urn parts, you may want to index certain fields of an aspect. The indexable fields of aspects of a given entity are configured in a file in JSON format which must be provided during your local DAO instantiation. Refer to the storage config for <a href="https://github.com/linkedin/datahub/blob/master/gms/factories/src/main/resources/datasetStorageConfig.json" target="_blank" rel="noopener noreferrer">dataset</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5-bootstrap-index-table-for-existing-urns"></a>5. Bootstrap index table for existing urns<a class="hash-link" href="#5-bootstrap-index-table-for-existing-urns" title="Direct link to heading">#</a></h2><p>If you have already enabled SCSI then the write path will ensure that every new urn inserted into the primary document store (i.e. <code>metadata_aspect</code> table), also gets inserted into the index table. However for urns that already exist in the <code>metadata_aspect</code> table, you will need to bootstrap the index table. Refer to the bootstrap <a href="https://github.com/linkedin/datahub/blob/master/gms/database/scripts/index/dataset-bootstrap.sql" target="_blank" rel="noopener noreferrer">script</a> for datasets as an example.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6-add-finder-method-at-the-resource-level"></a>6. Add finder method at the resource level<a class="hash-link" href="#6-add-finder-method-at-the-resource-level" title="Direct link to heading">#</a></h2><p><a href="https://github.com/linkedin/datahub-gma/blob/master/restli-resources/src/main/java/com/linkedin/metadata/restli/BaseEntityResource.java" target="_blank" rel="noopener noreferrer">BaseEntityResource</a> currently exposes Finder resource method called filter that returns a list of entities that satisfy the filter conditions specified in query parameters. Please refer to <a href="https://github.com/linkedin/datahub/blob/master/gms/impl/src/main/java/com/linkedin/metadata/resources/dataset/Datasets.java" target="_blank" rel="noopener noreferrer">Datasets</a> resource to understand how to override the filter method.
Once you have the resource method defined, you could as well expose client methods that take different input arguments. Please refer to listUrnsFromIndex and filter methods in <a href="https://github.com/linkedin/datahub/blob/master/gms/client/src/main/java/com/linkedin/dataset/client/Datasets.java" target="_blank" rel="noopener noreferrer">Datasets</a> client for reference.</p><p>Once you have onboarded to SCSI for your entity, you can test the changes as described below</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing-your-changes-with-some-sample-api-calls"></a>Testing your changes with some sample API calls<a class="hash-link" href="#testing-your-changes-with-some-sample-api-calls" title="Direct link to heading">#</a></h2><p>For the steps below, we assume you have already enabled SCSI by following the steps mentioned above.</p><p>Run the ingestion script if you haven&#x27;t already using</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">```</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./docker/ingestion/ingestion.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">```</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Connect to the MySQL server and you should be able to see the records.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql&gt; select * from metadata_index;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+--------------------------------------------------------------------+------------------------------------+------------------------+---------+---------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id | urn                                                                | aspect                             | path                   | longVal | stringVal                 | doubleVal |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+--------------------------------------------------------------------+------------------------------------+------------------------+---------+---------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  1 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | kafka                     |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  2 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  3 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleKafkaDataset        |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  4 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:kafka |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  5 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | hdfs                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  6 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  7 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleHdfsDataset         |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  8 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:hdfs  |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  9 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | hive                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 10 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 11 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleHiveDataset         |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 12 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:hive  |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+--------------------------------------------------------------------+------------------------------------+------------------------+---------+---------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">12 rows in set (0.01 sec)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the following section we will try some API calls, now that the urn parts are ingested</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-list-of-dataset-urns"></a>Get list of dataset urns<a class="hash-link" href="#get-list-of-dataset-urns" title="Direct link to heading">#</a></h3><p>Note that the results are paginated</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &quot;http://localhost:8080/datasets?q=filter&amp;aspects=List()&quot; -X GET -H &#x27;X-RestLi-Protocol-Version: 2.0.0&#x27; -H &#x27;X-RestLi-Method: finder&#x27; | jq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;elements&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleHdfsDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:hdfs&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleHiveDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:hive&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleKafkaDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:kafka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;paging&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;count&quot;: 10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;start&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;links&quot;: []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-list-of-dataset-urns-after-a-given-urn"></a>Get list of dataset urns after a given urn<a class="hash-link" href="#get-list-of-dataset-urns-after-a-given-urn" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &quot;http://localhost:8080/datasets?q=filter&amp;aspects=List()&amp;urn=urn%3Ali%3Adataset%3A%28urn%3Ali%3AdataPlatform%3Ahdfs%2CSampleHdfsDataset%2CPROD%29&quot; -X GET -H &#x27;X-RestLi-Protocol-Version: 2.0.0&#x27; -H &#x27;X-RestLi-Method: finder&#x27; | jq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;elements&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleHiveDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:hive&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleKafkaDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:kafka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;paging&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;count&quot;: 10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;start&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;links&quot;: []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-all-datasets-along-with-aspects-status-and-ownership-if-they-exist"></a>Get all datasets along with aspects <code>Status</code> and <code>Ownership</code> (if they exist)<a class="hash-link" href="#get-all-datasets-along-with-aspects-status-and-ownership-if-they-exist" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &quot;http://localhost:8080/datasets?q=filter&amp;aspects=List(com.linkedin.common.Status,com.linkedin.common.Ownership)&quot; -X GET -H &#x27;X-RestLi-Protocol-Version: 2.0.0&#x27; -H &#x27;X-RestLi-Method: finder&#x27; | jq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;elements&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;ownership&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;owners&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:datahub&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;lastModified&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;actor&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;time&quot;: 1581407189000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleHdfsDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:hdfs&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;ownership&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;owners&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:datahub&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;lastModified&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;actor&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;time&quot;: 1581407189000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleHiveDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:hive&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;ownership&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;owners&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;owner&quot;: &quot;urn:li:corpuser:datahub&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;type&quot;: &quot;DATAOWNER&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;lastModified&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;actor&quot;: &quot;urn:li:corpuser:jdoe&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;time&quot;: 1581407189000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SampleKafkaDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:kafka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;paging&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;count&quot;: 10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;start&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;links&quot;: []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing-the-storage-config"></a>Testing the Storage Config:<a class="hash-link" href="#testing-the-storage-config" title="Direct link to heading">#</a></h3><p>The storage config for datasets looks like the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;aspectStorageConfigMap&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;com.linkedin.common.Status&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;pathStorageConfigMap&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;/removed&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &quot;strongConsistentSecondaryIndex&quot;: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>which means that the <code>removed</code> field of <code>Status</code> aspect should be indexed in SCSI.
None of the dataset urns ingested so far, has a <code>Status</code> aspect. Let us try to ingest a new dataset, with several metadata aspects including the <code>Status</code> aspect</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &#x27;http://localhost:8080/datasets?action=ingest&#x27; -X POST -H &#x27;X-RestLi-Protocol-Version:2.0.0&#x27; --data &#x27;{&quot;snapshot&quot;: {&quot;aspects&quot;:[{&quot;com.linkedin.common.Ownership&quot;:{&quot;owners&quot;:[{&quot;owner&quot;:&quot;urn:li:corpuser:fbar&quot;,&quot;type&quot;:&quot;DATAOWNER&quot;}],&quot;lastModified&quot;:{&quot;time&quot;:0,&quot;actor&quot;:&quot;urn:li:corpuser:fbar&quot;}}},{&quot;com.linkedin.common.Status&quot;:{&quot;removed&quot;:false}},{&quot;com.linkedin.schema.SchemaMetadata&quot;:{&quot;schemaName&quot;:&quot;FooEvent&quot;,&quot;platform&quot;:&quot;urn:li:dataPlatform:foo&quot;,&quot;version&quot;:0,&quot;created&quot;:{&quot;time&quot;:0,&quot;actor&quot;:&quot;urn:li:corpuser:fbar&quot;},&quot;lastModified&quot;:{&quot;time&quot;:0,&quot;actor&quot;:&quot;urn:li:corpuser:fbar&quot;},&quot;hash&quot;:&quot;&quot;,&quot;platformSchema&quot;:{&quot;com.linkedin.schema.KafkaSchema&quot;:{&quot;documentSchema&quot;:&quot;{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;MetadataChangeEvent\&quot;,\&quot;namespace\&quot;:\&quot;com.linkedin.mxe\&quot;,\&quot;doc\&quot;:\&quot;Kafka event for proposing a metadata change for an entity.\&quot;,\&quot;fields\&quot;:[{\&quot;name\&quot;:\&quot;auditHeader\&quot;,\&quot;type\&quot;:{\&quot;type\&quot;:\&quot;record\&quot;,\&quot;name\&quot;:\&quot;KafkaAuditHeader\&quot;,\&quot;namespace\&quot;:\&quot;com.linkedin.avro2pegasus.events\&quot;,\&quot;doc\&quot;:\&quot;Header\&quot;}}]}&quot;}},&quot;fields&quot;:[{&quot;fieldPath&quot;:&quot;foo&quot;,&quot;description&quot;:&quot;Bar&quot;,&quot;nativeDataType&quot;:&quot;string&quot;,&quot;type&quot;:{&quot;type&quot;:{&quot;com.linkedin.schema.StringType&quot;:{}}}}]}}],&quot;urn&quot;:&quot;urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD)&quot;}}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You should be able to see the urn parts of the newly ingested urn in the index table, along with the <code>removed</code> field of <code>Status</code> aspect.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mysql&gt; select * from metadata_index;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+----------------------------------------------------------------------+------------------------------------+------------------------+---------+----------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| id | urn                                                                  | aspect                             | path                   | longVal | stringVal                  | doubleVal |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+----------------------------------------------------------------------+------------------------------------+------------------------+---------+----------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  1 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | kafka                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  2 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  3 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleKafkaDataset         |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  4 | urn:li:dataset:(urn:li:dataPlatform:kafka,SampleKafkaDataset,PROD)   | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:kafka  |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  5 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | hdfs                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  6 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  7 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleHdfsDataset          |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  8 | urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:hdfs   |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|  9 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | hive                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 10 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 11 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SampleHiveDataset          |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 12 | urn:li:dataset:(urn:li:dataPlatform:hive,SampleHiveDataset,PROD)     | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:hive   |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 13 | urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /platform/platformName |    NULL | presto                     |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 14 | urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /origin                |    NULL | PROD                       |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 15 | urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /datasetName           |    NULL | SamplePrestoDataset        |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 16 | urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD) | com.linkedin.common.urn.DatasetUrn | /platform              |    NULL | urn:li:dataPlatform:presto |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| 17 | urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD) | com.linkedin.common.Status         | /removed               |    NULL | false                      |      NULL |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----+----------------------------------------------------------------------+------------------------------------+------------------------+---------+----------------------------+-----------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">17 rows in set (0.00 sec)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Next, let&#x27;s try some API calls to test the filter conditions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get-all-dataset-urns-that-are-non-removed-ie-removedfalse"></a>Get all dataset urns that are non-removed i.e. <code>removed=false</code><a class="hash-link" href="#get-all-dataset-urns-that-are-non-removed-ie-removedfalse" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl &quot;http://localhost:8080/datasets?q=filter&amp;aspects=List()&amp;filter=(criteria:List((aspect:com.linkedin.common.Status,pathParams:(path:%2Fremoved,value:(&quot;boolean&quot;:false)))))&quot; -X GET -H &#x27;X-RestLi-Protocol-Version: 2.0.0&#x27; -H &#x27;X-RestLi-Method: finder&#x27; | jq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;elements&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;urn&quot;: &quot;urn:li:dataset:(urn:li:dataPlatform:presto,SamplePrestoDataset,PROD)&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;origin&quot;: &quot;PROD&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;name&quot;: &quot;SamplePrestoDataset&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;platform&quot;: &quot;urn:li:dataPlatform:presto&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;paging&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;count&quot;: 10,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;start&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;links&quot;: []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You can try similar API calls to return metadata aspects of urns that meet the filter criteria.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/linkedin/datahub/blob/master/docs/how/scsi-onboarding-guide.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/advanced/high-cardinality"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« High Cardinality Relationships</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/how/kafka-config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to configure Kafka? Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-create-urn-path-extractor-for-your-entity" class="table-of-contents__link">1. Create urn path extractor for your entity</a></li><li><a href="#2-add-appropriate-docker-environment-variable-to-enable-scsi-for-your-entity" class="table-of-contents__link">2. Add appropriate docker environment variable to enable SCSI for your entity</a></li><li><a href="#3-enable-scsi-in-local-dao" class="table-of-contents__link">3. Enable SCSI in local DAO</a></li><li><a href="#4-define-storage-config-and-use-while-instantiating-your-dao" class="table-of-contents__link">4. Define Storage Config and use while instantiating your DAO</a></li><li><a href="#5-bootstrap-index-table-for-existing-urns" class="table-of-contents__link">5. Bootstrap index table for existing urns</a></li><li><a href="#6-add-finder-method-at-the-resource-level" class="table-of-contents__link">6. Add finder method at the resource level</a></li><li><a href="#testing-your-changes-with-some-sample-api-calls" class="table-of-contents__link">Testing your changes with some sample API calls</a><ul><li><a href="#get-list-of-dataset-urns" class="table-of-contents__link">Get list of dataset urns</a></li><li><a href="#get-list-of-dataset-urns-after-a-given-urn" class="table-of-contents__link">Get list of dataset urns after a given urn</a></li><li><a href="#get-all-datasets-along-with-aspects-status-and-ownership-if-they-exist" class="table-of-contents__link">Get all datasets along with aspects <code>Status</code> and <code>Ownership</code> (if they exist)</a></li><li><a href="#testing-the-storage-config" class="table-of-contents__link">Testing the Storage Config:</a></li><li><a href="#get-all-dataset-urns-that-are-non-removed-ie-removedfalse" class="table-of-contents__link">Get all dataset urns that are non-removed i.e. <code>removed=false</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Quickstart</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/faq">FAQs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3qFQC5IiwR5fvWEqi_tJ5w" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/townhalls">Town Halls</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/#adoption">Adoption</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/demo">Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/roadmap">Roadmap</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a href="https://github.com/linkedin/datahub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2015-2021 DataHub Project Authors.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.738a90de.js"></script>
<script src="/assets/js/main.42056712.js"></script>
</body>
</html>